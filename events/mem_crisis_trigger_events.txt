# Crisis trigger events
# For use in triggering various crisis events; originally intended for Xenomorph mid-game crisis

namespace = mem_crisis_trigger

# This is for MID-GAME crisis events.
event = {
	id = mem_crisis_trigger.1
	hide_window = yes

	is_triggered_only = yes

	trigger = {
        is_crises_allowed = yes
        mid_game_years_passed >= 25
		NOT = { has_global_flag = galactic_crisis_happened }
    }

    immediate = {
        random_country = {
            limit = {
                is_country_type = global_event
            }
            
            random_list = {

                ### The Pestilence (Xenomorph Crisis)
                10 = {
                    modifier = {
                        factor = 0
                        any_country = {
                            NOR = {
                                is_country_type = default
                                any_owned_planet = {
                                    has_planet_modifier = pm_dangerous_wildlife
                                    is_colony = yes
                                }
                            }
                            has_country_flag = mem_crisis_xeno_happened
                        }
                    }
                    modifier = {
                        factor = 2
                        mid_game_years_passed >= 40
                    }
                    modifier = {
                        factor = 3
                        any_country = {
                            is_country_type = default
                            any_owned_planet = {
                                has_planet_modifier = pm_dangerous_wildlife
                                is_colony = yes
                            }
                        }
                    }
                    country_event = { id = mem_crisis_xeno.1 days = 200 random = 800 }
                }

                ### Nothing
                120 = {}
            }
        }
    }
    
}