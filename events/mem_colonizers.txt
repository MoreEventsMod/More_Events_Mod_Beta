# Confederacy of the Endless Sea
# By ViolentBeetle

namespace = mem_colonizers

# On first viting the system
ship_event = {
	id = mem_colonizers.1
	title = mem_colonizers.1.name
	desc = mem_colonizers.1.desc

	is_triggered_only = yes

	location = FROM
	picture = GFX_evt_federation_fleet
	show_sound = event_alien_signal

	trigger = {
		owner = {
			is_country_type = default
			NOT = { has_country_flag = mem_colonizers_established_contact }
		}
		FROM = {
			has_star_flag = mem_colonizers_contact_trigger
			any_neighbor_system = {
				exists = space_owner
				space_owner = {
					is_country_type = mem_colonizers_dormant_country
				}
			}
		}
	}

	immediate = {
		owner = {
			set_country_flag = mem_colonizers_established_contact
		}
	}

	option = {
		name = ONSCREEN
		owner = {
			hidden_effect = {
				country_event = {
					id = mem_colonizers.2
				}
			}
			add_resource = {
				influence = 30
			}
		}
	}
}

# Diplomatic event
country_event = {
	id = mem_colonizers.2
	title = MEM_COLONIZERS_HEADER
	desc = mem_colonizers.2.desc

	is_triggered_only = yes
	diplomatic = yes

	picture_event_data = {
		room = no_video_feed_room
	}

	immediate = {
		random_country = {
			limit = {
				is_country_type = mem_colonizers_dormant_country
			}
			establish_communications_no_message = root
		}
		random_system = {
			limit = {
				has_star_flag = mem_colonizers_gate_system
			}
			save_event_target_as = gate_system
		}
	}

	option = {
		name = mem_colonizers.2.a
		trigger = {
			NOR = {
				has_valid_civic = civic_fanatic_purifiers
				has_valid_civic = civic_machine_terminator
				has_valid_civic = civic_hive_devouring_swarm
			}
		}
	}
	option = {
		name = mem_colonizers.2.b
		trigger = {
			OR = {
				has_ethic = ethic_xenophile
				has_ethic = ethic_fanatic_xenophile
			}
		}
	}
	option = {
		name = mem_colonizers.2.c
		trigger = {
			OR = {
				has_ethic = ethic_xenophobe
				has_ethic = ethic_fanatic_xenophobe
			}
			NOT = {
				has_valid_civic = civic_fanatic_purifiers
			}
		}
	}
	option = {
		name = mem_colonizers.2.d
		trigger = {
			has_valid_civic = civic_fanatic_purifiers
		}
	}
	option = {
		name = mem_colonizers.2.e
		trigger = {
			has_valid_civic = civic_hive_devouring_swarm
		}
	}
	option = {
		name = mem_colonizers.2.f
		trigger = {
			has_valid_civic = civic_machine_terminator
		}
	}
}

# Custom diplo with them
country_event = {
	id = mem_colonizers.3
	title = MEM_COLONIZERS_HEADER
	desc = mem_colonizers.3.desc.1

	is_triggered_only = yes
	diplomatic = yes

	picture_event_data = {
		room = no_video_feed_room
	}

	trigger = {
		FROM = {
			is_country_type = mem_colonizers_dormant_country
		}
		mem_is_jerk_country = no
		NOT = {
			has_country_flag = mem_colonizers_diplo_engaged
		}
	}

	immediate = {
		set_country_flag = mem_colonizers_diplo_engaged
	}

	option = {
		name = mem_colonizers.3.a
		default_hide_option = yes
		remove_country_flag = mem_colonizers_diplo_engaged
	}

	option = {
		name = mem_colonizers.3.b.1
		trigger = {
			always = no
		}
	}
	option = {
		name = mem_colonizers.3.b.2
		trigger = {
			always = no
		}
	}
	option = {
		name = mem_colonizers.3.c
		trigger = {
			always = no
		}
	}

	option = {
		name = mem_colonizers.3.d
		is_dialog_only = yes
		response_text = mem_colonizers.3.d.response
	}
	option = {
		name = mem_colonizers.3.e
		is_dialog_only = yes
		response_text = mem_colonizers.3.e.response
	}
}