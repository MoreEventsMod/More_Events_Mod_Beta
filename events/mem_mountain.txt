# Dragon's Mountain
# By ViolentBeetle

namespace = mem_mountain

# On_Survey; Add dig site
ship_event = {
	id = mem_mountain.1
	title = mem_mountain.1.name
	desc = mem_mountain.1.desc

	is_triggered_only = yes

	picture = GFX_evt_ruined_system
	location = FROM
	show_sound = event_sensor_ping

	trigger = {
		FROM = {
			has_planet_flag = mem_mountain_gas_giant
			NOT = {
				has_global_flag = mem_mountain_dig_spawned
			}
		}
	}

	immediate = {
		set_global_flag = mem_mountain_dig_spawned
		FROM = {
			create_archaeological_site = mem_mountain_gas_giant_dig_site
		}
	}
}

### DIG SITE ONE ###

fleet_event = {
	id = mem_mountain.10
	title = mem_mountain.10.name
	desc = mem_mountain.10.desc

	is_triggered_only = yes
	archaeology = yes

	picture = GFX_evt_ship_offloading_cargo
	show_sound = event_door_opening

	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = DIG
	}
}

fleet_event = {
	id = mem_mountain.11
	title = mem_mountain.11.name
	desc = mem_mountain.11.desc

	is_triggered_only = yes
	archaeology = yes

	picture = GFX_evt_space_station
	show_sound = event_door_opening

	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = DIG
	}
}

fleet_event = {
	id = mem_mountain.12
	title = mem_mountain.12.name
	desc = mem_mountain.12.desc

	is_triggered_only = yes
	archaeology = yes

	picture = GFX_evt_ancient_databank
	show_sound = event_door_opening

	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = DIG
	}
}

fleet_event = {
	id = mem_mountain.13
	title = mem_mountain.13.name
	desc = mem_mountain.13.desc

	is_triggered_only = yes
	archaeology = yes

	picture = GFX_evt_shielded_planet
	show_sound = event_energy_field

	immediate = {
		from = { set_site_progress_locked = yes }
		random_planet = {
			limit = {
				has_planet_flag = mem_mountain_moon
			}
			save_event_target_as = shielded_moon
		}
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = mem_mountain.13.a

		event_target:shielded_moon = {
			change_pc = pc_barren_cold
			create_archaeological_site = mem_mountain_moon_dig_site
		}
	}
}

### DIG SITE TWO ###

fleet_event = {
	id = mem_mountain.20
	title = mem_mountain.20.name
	desc = mem_mountain.20.desc

	is_triggered_only = yes
	archaeology = yes

	picture = GFX_evt_mem_evil_hideout
	show_sound = event_door_opening

	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = DIG
	}
}

fleet_event = {
	id = mem_mountain.21
	title = mem_mountain.21.name
	desc = mem_mountain.21.desc

	is_triggered_only = yes
	archaeology = yes

	picture = GFX_evt_mem_alien_pilgrimage
	show_sound = event_door_opening

	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = DIG
	}
}

fleet_event = {
	id = mem_mountain.22
	title = mem_mountain.22.name
	desc = mem_mountain.22.desc

	is_triggered_only = yes
	archaeology = yes

	picture = GFX_evt_space_dragon_blue
	show_sound = event_door_opening

	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = ONSCREEN
	}
}