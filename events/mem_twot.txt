# Two World of Tomorrow
# By ViolentBeetle

namespace = mem_twot

fleet_event = {
	id = mem_twot.1
	title = mem_twot.1.name
	desc = mem_twot.1.desc

	picture = GFX_evt_mem_desert_landscape
	show_sound = event_finding_loot

	archaeology = yes
	is_triggered_only = yes

	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = DIG
	}
}

fleet_event = {
	id = mem_twot.2
	title = mem_twot.2.name
	desc = mem_twot.2.desc

	picture = GFX_evt_mem_factory_02
	show_sound = event_finding_loot

	archaeology = yes
	is_triggered_only = yes

	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = DIG
		small_artifact_reward = yes
	}
}

fleet_event = {
	id = mem_twot.3
	title = mem_twot.3.name
	desc = mem_twot.3.desc

	picture = GFX_evt_ship_offloading_cargo
	show_sound = event_finding_loot

	archaeology = yes
	is_triggered_only = yes

	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = DIG
		owner = {
			IF = {
				limit = {
					OR = {
						has_technology = tech_droid_workers
						is_regular_empire = no
						has_policy_flag = robots_outlawed
					}
				}
				add_random_research_option = {
					add_progress = 0.75
					area = engineering
					tier = 2
					ignore_prereqs = no
					fail_effects = {
						add_monthly_resource_mult = {
							resource = engineering_research
							value = @tier5researchreward
							min = @tier5researchmin
							max = @tier5researchmax
						}
					}
				}
			}
			ELSE_IF = {
				limit = {
					has_technology = tech_robotic_workers
				}
				add_research_option = tech_droid_workers
				add_tech_progress = {
					tech = tech_droid_workers
					progress = 0.5
				}
			}
			ELSE = {
				add_research_option = tech_robotic_workers
				add_tech_progress = {
					tech = tech_robotic_workers
					progress = 0.5
				}
			}
		}
	}
}

fleet_event = {
	id = mem_twot.4
	title = mem_twot.4.name
	desc = mem_twot.4.desc

	picture = GFX_evt_mem_ancient_mining_site
	show_sound = event_finding_loot

	archaeology = yes
	is_triggered_only = yes

	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no }
		from.planet = {
			remove_deposit = d_mem_twot_ruins
			add_deposit = d_mem_twot_world_of_tomorrow
		}
		owner = {
			add_random_research_option = {
				add_progress = 0.75
				area = society
				tier = 3
				ignore_prereqs = no
				fail_effects = {
					add_monthly_resource_mult = {
						resource = society_research
						value = @tier5researchreward
						min = @tier5researchmin
						max = @tier5researchmax
					}
				}
			}
		}
	}
	
	option = {
		name = UNFORTUNATE
		trigger = {
			owner = {
				NOR = {
					is_xenophobe = yes
					is_gestalt = yes
					has_valid_civic = civic_machine_servitor
					has_valid_civic = civic_shared_burden
				}
			}
		}
	}

	option = {
		name = INTERESTING
		trigger = {
			owner = {
				OR = {
					is_xenophobe = yes
					is_gestalt = yes
				}
				NOR = {
					has_valid_civic = civic_machine_servitor
					has_valid_civic = civic_shared_burden
				}
			}
		}
	}

	option = {
		name = mem_twot.4.a
		trigger = {
			owner = { has_valid_civic = civic_shared_burden }
		}
	}

	option = {
		name = mem_twot.4.b
		trigger = {
			owner = { has_valid_civic = civic_machine_servitor }
		}
	}
}

