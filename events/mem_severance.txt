# Severance
# By ViolentBeetle

namespace = mem_severance

# Intro event - why no FTL
fleet_event = {
    id = mem_severance.1
    title = mem_severance.1.name
    desc = mem_severance.1.desc

    picture = GFX_evt_busy_spaceport
    show_sound = event_finding_loot

    archaeology = yes
    is_triggered_only = yes
    
    immediate = {
		fromfrom = { set_site_progress_locked = yes }
	}

	after = { 
		fromfrom = { set_site_progress_locked = no } 
    }
    
    option = {
		name = DIG
		owner = { 
			add_monthly_resource_mult = {
     			resource = engineering_research
     			value = @tier3researchreward
     			min = @tier3researchmin
     			max = @tier3researchmax
     		}
 		}
	}
}

# Congress, first mentions of Severance
fleet_event = {
    id = mem_severance.2
    title = mem_severance.2.name
    desc = mem_severance.2.desc

    picture = GFX_evt_federation_fleet
    show_sound = event_finding_loot

    archaeology = yes
    is_triggered_only = yes

    immediate = {
		fromfrom = { set_site_progress_locked = yes }
	}

	after = { 
		fromfrom = { set_site_progress_locked = no } 
    }

    option = {
        name = DIG
    }
}

# Layers Deep
fleet_event = {
    id = mem_severance.3
    title = mem_severance.3.name
    desc = mem_severance.3.desc

    picture = GFX_evt_habitable_dig_site
    show_sound = event_finding_loot

    archaeology = yes
    is_triggered_only = yes

    immediate = {
		fromfrom = { set_site_progress_locked = yes }
	}

	after = { 
		fromfrom = { set_site_progress_locked = no } 
    }

    option = {
        name = DIG
    }
}

# The Red Zone
fleet_event = {
    id = mem_severance.4
    title = mem_severance.4.name
    desc = mem_severance.4.desc

    picture = GFX_evt_mem_factory_02
    show_sound = event_finding_loot

    archaeology = yes
    is_triggered_only = yes

    immediate = {
		fromfrom = { set_site_progress_locked = yes }
	}

	after = { 
		fromfrom = { set_site_progress_locked = no } 
    }

    option = {
        name = DIG
    }
}

# The Constitution Hall
fleet_event = {
    id = mem_severance.5
    title = mem_severance.5.name
    desc = mem_severance.5.desc

    picture = GFX_evt_mem_factory_02
    show_sound = event_celebration

    archaeology = yes
    is_triggered_only = yes

    immediate = {
		fromfrom = { set_site_progress_locked = yes }
	}

	after = { 
		fromfrom = { set_site_progress_locked = no } 
    }

    option = {
        name = DIG
    }
}

# The End
fleet_event = {
    id = mem_severance.6
    title = mem_severance.6.name
    desc = mem_severance.6.desc

    picture = GFX_evt_mem_terror_attack
    show_sound = event_screams

    archaeology = yes
    is_triggered_only = yes

    immediate = {
		fromfrom = { set_site_progress_locked = yes }
	}

	after = { 
		fromfrom = { set_site_progress_locked = no } 
    }

    option = {
        name = mem_severance.6.a
    }
}

# Game start event: Isolate wormhole system, since it doesn't seem to be islateable from initializer
event = {
    id = mem_severance.10
    hide_window = yes
    is_triggered_only = yes

    immediate = {
        random_system = {
            limit = {
                has_star_flag = mem_severance_relic_system
            }
            isolate_system = yes
        }
    }
}